{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/antoniussuharmono/dev/binus/ujian/react-native-ujian/movie-list-ujian/app/screens/MovieDetails/index.js\";\n\nimport React, { useState, useRef, useEffect, useLayoutEffect } from 'react';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ReadMore from 'react-native-read-more-text';\nimport { Feather } from '@expo/vector-icons';\nimport { Alert } from \"../../components/common/Alert\";\nimport { Share } from \"../../components/common/Share\";\nimport Screen from \"../../components/common/Screen\";\nimport Spinner from \"../../components/common/Spinner\";\nimport NotificationCard from \"../../components/cards/NotificationCard\";\nimport PosterRow from \"../../components/cards/rows/PosterRow\";\nimport PersonModal from \"../../components/modals/PersonModal\";\nimport PersonListRow from \"../../components/cards/rows/PersonListRow\";\nimport PersonRow from \"../../components/cards/rows/PersonRow\";\nimport SectionRow from \"../../components/cards/rows/SectionRow\";\nimport MainInfoRow from \"../../components/cards/rows/MainInfoRow\";\nimport { TouchableOpacity } from \"../../components/common/TouchableOpacity\";\nimport request from \"../../services/api\";\nimport { getImageApi } from \"../../utils/images\";\nimport { convertMinsToHrsMins } from \"../../utils/time\";\nimport { convertToUpperCaseFirstLetter } from \"../../utils/letters\";\nimport { convertToDate } from \"../../utils/dates\";\nimport { convertToDolar } from \"../../utils/currency\";\nimport { convertToGenres } from \"../../utils/genre\";\nimport { sliceArrayLength } from \"../../utils/array\";\nimport isoLanguage from \"../../data/iso.json\";\nimport { darkBlue } from \"../../utils/colors\";\nimport styles from \"./styles\";\nvar UNINFORMED = 'Uninformed';\nvar INITIAL_INFO = {\n  id: '',\n  backdropPath: '',\n  title: '',\n  voteAverage: 0,\n  video: [],\n  overview: UNINFORMED,\n  cast: [],\n  crew: [],\n  productionCompanies: [],\n  images: [],\n  infosDetail: {\n    Duration: UNINFORMED,\n    Genre: UNINFORMED,\n    Language: UNINFORMED,\n    Release: UNINFORMED,\n    Budget: UNINFORMED,\n    Revenue: UNINFORMED,\n    Adult: UNINFORMED\n  }\n};\nvar ADULT_RATE = {\n  true: 'No',\n  false: 'Yes'\n};\n\nvar renderReadMoreFooter = function renderReadMoreFooter(text, handlePress) {\n  return React.createElement(TouchableOpacity, {\n    onPress: handlePress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 3\n    }\n  }, React.createElement(Text, {\n    style: styles.readMore,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, text));\n};\n\nvar MovieDetails = function MovieDetails(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isError = _useState4[0],\n      setIsError = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showImage = _useState6[0],\n      setShowImage = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      creditId = _useState8[0],\n      setCreditId = _useState8[1];\n\n  var _useState9 = useState(INITIAL_INFO),\n      _useState10 = _slicedToArray(_useState9, 2),\n      info = _useState10[0],\n      setInfo = _useState10[1];\n\n  var personModalRef = useRef(null);\n\n  var getInfosDetail = function getInfosDetail(_ref2) {\n    var _ref2$runtime = _ref2.runtime,\n        runtime = _ref2$runtime === void 0 ? 0 : _ref2$runtime,\n        _ref2$genres = _ref2.genres,\n        genres = _ref2$genres === void 0 ? '' : _ref2$genres,\n        _ref2$original_langua = _ref2.original_language,\n        original_language = _ref2$original_langua === void 0 ? '' : _ref2$original_langua,\n        _ref2$release_date = _ref2.release_date,\n        release_date = _ref2$release_date === void 0 ? '' : _ref2$release_date,\n        _ref2$budget = _ref2.budget,\n        budget = _ref2$budget === void 0 ? 0 : _ref2$budget,\n        _ref2$revenue = _ref2.revenue,\n        revenue = _ref2$revenue === void 0 ? 0 : _ref2$revenue,\n        _ref2$adult = _ref2.adult,\n        adult = _ref2$adult === void 0 ? '' : _ref2$adult;\n    return {\n      Duration: convertMinsToHrsMins(runtime),\n      Genre: convertToGenres(sliceArrayLength(genres, 2)),\n      Language: convertToUpperCaseFirstLetter(isoLanguage[original_language]),\n      Release: convertToDate(release_date),\n      Budget: convertToDolar(budget),\n      Revenue: convertToDolar(revenue),\n      Adult: ADULT_RATE[adult] || UNINFORMED\n    };\n  };\n\n  var formatImageUrl = function formatImageUrl(images) {\n    return sliceArrayLength(images, 15).map(function (item) {\n      return getImageApi(item.file_path, 'uri', 'original');\n    });\n  };\n\n  var handlePersonModal = function handlePersonModal() {\n    var _personModalRef$curre;\n\n    (_personModalRef$curre = personModalRef.current) == null ? void 0 : _personModalRef$curre.open();\n  };\n\n  var handlePerson = function handlePerson(id) {\n    setCreditId(id);\n    handlePersonModal();\n  };\n\n  var handleImage = function handleImage() {\n    setShowImage(!showImage);\n  };\n\n  var handleShare = function handleShare(title, id) {\n    if (isError) {\n      Alert({\n        title: 'Attention',\n        description: 'Something wrong has happened, please try again later.'\n      });\n    } else {\n      Share({\n        message: title + \", know everything about this movie \\uD83C\\uDF7F\",\n        url: \"https://www.themoviedb.org/movie/\" + id,\n        title: 'AmoCinema',\n        dialogTitle: title + \", know everything about this movie \\uD83C\\uDF7F\"\n      });\n    }\n  };\n\n  var requestMoviesInfo = function requestMoviesInfo() {\n    var id, data;\n    return _regeneratorRuntime.async(function requestMoviesInfo$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setIsLoading(true);\n            id = route.params.id;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(request(\"movie/\" + id, {\n              include_image_language: 'en,null',\n              append_to_response: 'credits,videos,images'\n            }));\n\n          case 5:\n            data = _context.sent;\n            setIsLoading(false);\n            setIsError(false);\n            setInfo({\n              id: id,\n              backdropPath: data.backdrop_path || INITIAL_INFO.backdropPath,\n              title: data.title || INITIAL_INFO.title,\n              voteAverage: data.vote_average || INITIAL_INFO.voteAverage,\n              video: data.videos.results[0] || INITIAL_INFO.video,\n              overview: data.overview || INITIAL_INFO.overview,\n              cast: sliceArrayLength(data.credits.cast, 15),\n              crew: sliceArrayLength(data.credits.crew, 15),\n              productionCompanies: sliceArrayLength(data.production_companies, 10),\n              images: formatImageUrl(data.images.backdrops),\n              infosDetail: getInfosDetail(data)\n            });\n            _context.next = 15;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            setIsLoading(false);\n            setIsError(true);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  var renderItem = function renderItem(item, type, handleTeamDetail) {\n    return React.createElement(PersonRow, {\n      item: item,\n      type: type,\n      onTeamDetail: handleTeamDetail,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }\n    });\n  };\n\n  var renderListEmpty = function renderListEmpty() {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.subTitleInfo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 7\n      }\n    }, \"Uninformed\"));\n  };\n\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return React.createElement(TouchableOpacity, {\n          style: styles.buttonShare,\n          onPress: function onPress() {\n            return handleShare(route.params.title, route.params.id);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 9\n          }\n        }, React.createElement(Feather, {\n          name: \"share\",\n          size: 23,\n          color: darkBlue,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }\n        }));\n      }\n    });\n  }, [navigation]);\n  useEffect(function () {\n    requestMoviesInfo();\n  }, []);\n  {\n    var backdropPath = info.backdropPath,\n        voteAverage = info.voteAverage,\n        video = info.video,\n        title = info.title,\n        infosDetail = info.infosDetail,\n        overview = info.overview,\n        cast = info.cast,\n        crew = info.crew,\n        productionCompanies = info.productionCompanies,\n        images = info.images;\n    return React.createElement(Screen, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }, isLoading ? React.createElement(Spinner, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }) : isError ? React.createElement(NotificationCard, {\n      icon: \"alert-octagon\",\n      onPress: requestMoviesInfo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }) : React.createElement(ScrollView, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, React.createElement(PosterRow, {\n      title: title,\n      backdropPath: backdropPath,\n      voteAverage: voteAverage,\n      images: images,\n      video: video,\n      showImage: showImage,\n      onPress: handleImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }), React.createElement(View, {\n      style: styles.containerMovieInfo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 15\n      }\n    }, React.createElement(MainInfoRow, {\n      data: infosDetail,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }), React.createElement(SectionRow, {\n      title: \"Synopsis\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, React.createElement(ReadMore, {\n      numberOfLines: 3,\n      renderTruncatedFooter: function renderTruncatedFooter(handlePress) {\n        return renderReadMoreFooter('Read more', handlePress);\n      },\n      renderRevealedFooter: function renderRevealedFooter(handlePress) {\n        return renderReadMoreFooter('Read less', handlePress);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      style: styles.subTitleInfo,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    }, overview))), React.createElement(SectionRow, {\n      title: \"Main cast\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: cast,\n      type: \"character\",\n      keyItem: \"creditId\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 19\n      }\n    })), React.createElement(SectionRow, {\n      title: \"Main technical team\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: crew,\n      type: \"job\",\n      keyItem: \"creditId\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    })), React.createElement(SectionRow, {\n      title: \"Producer\",\n      isLast: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    }, React.createElement(PersonListRow, {\n      data: productionCompanies,\n      type: \"production\",\n      keyItem: \"id\",\n      ListEmptyComponent: renderListEmpty,\n      onTeamDetail: handlePerson,\n      renderItem: renderItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 19\n      }\n    })))), React.createElement(PersonModal, {\n      ref: personModalRef,\n      creditId: creditId,\n      style: styles.bottomModal,\n      onClose: handlePersonModal,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    })));\n  }\n};\n\nexport default MovieDetails;","map":{"version":3,"sources":["/Users/antoniussuharmono/dev/binus/ujian/react-native-ujian/movie-list-ujian/app/screens/MovieDetails/index.js"],"names":["React","useState","useRef","useEffect","useLayoutEffect","ReadMore","Feather","Alert","Share","Screen","Spinner","NotificationCard","PosterRow","PersonModal","PersonListRow","PersonRow","SectionRow","MainInfoRow","TouchableOpacity","request","getImageApi","convertMinsToHrsMins","convertToUpperCaseFirstLetter","convertToDate","convertToDolar","convertToGenres","sliceArrayLength","isoLanguage","darkBlue","styles","UNINFORMED","INITIAL_INFO","id","backdropPath","title","voteAverage","video","overview","cast","crew","productionCompanies","images","infosDetail","Duration","Genre","Language","Release","Budget","Revenue","Adult","ADULT_RATE","true","false","renderReadMoreFooter","text","handlePress","readMore","MovieDetails","navigation","route","isLoading","setIsLoading","isError","setIsError","showImage","setShowImage","creditId","setCreditId","info","setInfo","personModalRef","getInfosDetail","runtime","genres","original_language","release_date","budget","revenue","adult","formatImageUrl","map","item","file_path","handlePersonModal","current","open","handlePerson","handleImage","handleShare","description","message","url","dialogTitle","requestMoviesInfo","params","include_image_language","append_to_response","data","backdrop_path","vote_average","videos","results","credits","production_companies","backdrops","renderItem","type","handleTeamDetail","renderListEmpty","subTitleInfo","setOptions","headerRight","buttonShare","container","containerMovieInfo","bottomModal"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useLayoutEffect } from 'react';\nimport { ScrollView, View, Text } from 'react-native';\nimport ReadMore from 'react-native-read-more-text';\nimport { Feather } from '@expo/vector-icons';\n\nimport { Alert } from '../../components/common/Alert';\nimport { Share } from '../../components/common/Share';\nimport Screen from '../../components/common/Screen';\nimport Spinner from '../../components/common/Spinner';\nimport NotificationCard from '../../components/cards/NotificationCard';\nimport PosterRow from '../../components/cards/rows/PosterRow';\nimport PersonModal from '../../components/modals/PersonModal';\nimport PersonListRow from '../../components/cards/rows/PersonListRow';\nimport PersonRow from '../../components/cards/rows/PersonRow';\nimport SectionRow from '../../components/cards/rows/SectionRow';\nimport MainInfoRow from '../../components/cards/rows/MainInfoRow';\nimport { TouchableOpacity } from '../../components/common/TouchableOpacity';\n\nimport request from '../../services/api';\n\nimport { getImageApi } from '../../utils/images';\nimport { convertMinsToHrsMins } from '../../utils/time';\nimport { convertToUpperCaseFirstLetter } from '../../utils/letters';\nimport { convertToDate } from '../../utils/dates';\nimport { convertToDolar } from '../../utils/currency';\nimport { convertToGenres } from '../../utils/genre';\nimport { sliceArrayLength } from '../../utils/array';\n\nimport isoLanguage from '../../data/iso.json';\n\nimport { darkBlue } from '../../utils/colors';\n\nimport styles from './styles';\n\nconst UNINFORMED = 'Uninformed';\nconst INITIAL_INFO = {\n  id: '',\n  backdropPath: '',\n  title: '',\n  voteAverage: 0,\n  video: [],\n  overview: UNINFORMED,\n  cast: [],\n  crew: [],\n  productionCompanies: [],\n  images: [],\n  infosDetail: {\n    Duration: UNINFORMED,\n    Genre: UNINFORMED,\n    Language: UNINFORMED,\n    Release: UNINFORMED,\n    Budget: UNINFORMED,\n    Revenue: UNINFORMED,\n    Adult: UNINFORMED\n  }\n};\nconst ADULT_RATE = {\n  true: 'No',\n  false: 'Yes'\n};\n\nconst renderReadMoreFooter = (text, handlePress) => (\n  <TouchableOpacity onPress={handlePress}>\n    <Text style={styles.readMore}>{text}</Text>\n  </TouchableOpacity>\n);\n\nconst MovieDetails = ({ navigation, route }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  const [showImage, setShowImage] = useState(false);\n  const [creditId, setCreditId] = useState(null);\n  const [info, setInfo] = useState(INITIAL_INFO);\n  const personModalRef = useRef(null);\n\n  /* eslint-disable camelcase */\n  const getInfosDetail = ({\n    runtime = 0,\n    genres = '',\n    original_language = '',\n    release_date = '',\n    budget = 0,\n    revenue = 0,\n    adult = ''\n  }) => ({\n    Duration: convertMinsToHrsMins(runtime),\n    Genre: convertToGenres(sliceArrayLength(genres, 2)),\n    Language: convertToUpperCaseFirstLetter(isoLanguage[original_language]),\n    Release: convertToDate(release_date),\n    Budget: convertToDolar(budget),\n    Revenue: convertToDolar(revenue),\n    Adult: ADULT_RATE[adult] || UNINFORMED\n  });\n  /* eslint-enable camelcase */\n\n  const formatImageUrl = (images) =>\n    sliceArrayLength(images, 15).map((item) =>\n      getImageApi(item.file_path, 'uri', 'original')\n    );\n\n  const handlePersonModal = () => {\n    personModalRef.current?.open();\n  };\n\n  const handlePerson = (id) => {\n    setCreditId(id);\n    handlePersonModal();\n  };\n\n  const handleImage = () => {\n    setShowImage(!showImage);\n  };\n\n  const handleShare = (title, id) => {\n    if (isError) {\n      Alert({\n        title: 'Attention',\n        description: 'Something wrong has happened, please try again later.'\n      });\n    } else {\n      Share({\n        message: `${title}, know everything about this movie \\u{1F37F}`,\n        url: `https://www.themoviedb.org/movie/${id}`,\n        title: 'AmoCinema',\n        dialogTitle: `${title}, know everything about this movie \\u{1F37F}`\n      });\n    }\n  };\n\n  const requestMoviesInfo = async () => {\n    try {\n      setIsLoading(true);\n\n      const { id } = route.params;\n      const data = await request(`movie/${id}`, {\n        include_image_language: 'en,null',\n        append_to_response: 'credits,videos,images'\n      });\n\n      setIsLoading(false);\n      setIsError(false);\n      setInfo({\n        id,\n        backdropPath: data.backdrop_path || INITIAL_INFO.backdropPath,\n        title: data.title || INITIAL_INFO.title,\n        voteAverage: data.vote_average || INITIAL_INFO.voteAverage,\n        video: data.videos.results[0] || INITIAL_INFO.video,\n        overview: data.overview || INITIAL_INFO.overview,\n        cast: sliceArrayLength(data.credits.cast, 15),\n        crew: sliceArrayLength(data.credits.crew, 15),\n        productionCompanies: sliceArrayLength(data.production_companies, 10),\n        images: formatImageUrl(data.images.backdrops),\n        infosDetail: getInfosDetail(data)\n      });\n    } catch (err) {\n      setIsLoading(false);\n      setIsError(true);\n    }\n  };\n\n  const renderItem = (item, type, handleTeamDetail) => (\n    <PersonRow item={item} type={type} onTeamDetail={handleTeamDetail} />\n  );\n\n  const renderListEmpty = () => (\n    <View>\n      <Text style={styles.subTitleInfo}>Uninformed</Text>\n    </View>\n  );\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: () => (\n        <TouchableOpacity\n          style={styles.buttonShare}\n          onPress={() => handleShare(route.params.title, route.params.id)}\n        >\n          <Feather name=\"share\" size={23} color={darkBlue} />\n        </TouchableOpacity>\n      )\n    });\n  }, [navigation]);\n\n  useEffect(() => {\n    requestMoviesInfo();\n  }, []);\n\n  {\n    const {\n      backdropPath,\n      voteAverage,\n      video,\n      title,\n      infosDetail,\n      overview,\n      cast,\n      crew,\n      productionCompanies,\n      images\n    } = info;\n\n    return (\n      <Screen>\n        <View style={styles.container}>\n          {isLoading ? (\n            <Spinner />\n          ) : isError ? (\n            <NotificationCard\n              icon=\"alert-octagon\"\n              onPress={requestMoviesInfo}\n            />\n          ) : (\n            <ScrollView>\n              <PosterRow\n                title={title}\n                backdropPath={backdropPath}\n                voteAverage={voteAverage}\n                images={images}\n                video={video}\n                showImage={showImage}\n                onPress={handleImage}\n              />\n              <View style={styles.containerMovieInfo}>\n                <MainInfoRow data={infosDetail} />\n                <SectionRow title=\"Synopsis\">\n                  <ReadMore\n                    numberOfLines={3}\n                    renderTruncatedFooter={(handlePress) =>\n                      renderReadMoreFooter('Read more', handlePress)\n                    }\n                    renderRevealedFooter={(handlePress) =>\n                      renderReadMoreFooter('Read less', handlePress)\n                    }\n                  >\n                    <Text style={styles.subTitleInfo}>{overview}</Text>\n                  </ReadMore>\n                </SectionRow>\n                <SectionRow title=\"Main cast\">\n                  <PersonListRow\n                    data={cast}\n                    type=\"character\"\n                    keyItem=\"creditId\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n                <SectionRow title=\"Main technical team\">\n                  <PersonListRow\n                    data={crew}\n                    type=\"job\"\n                    keyItem=\"creditId\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n                <SectionRow title=\"Producer\" isLast>\n                  <PersonListRow\n                    data={productionCompanies}\n                    type=\"production\"\n                    keyItem=\"id\"\n                    ListEmptyComponent={renderListEmpty}\n                    onTeamDetail={handlePerson}\n                    renderItem={renderItem}\n                  />\n                </SectionRow>\n              </View>\n            </ScrollView>\n          )}\n          <PersonModal\n            ref={personModalRef}\n            creditId={creditId}\n            style={styles.bottomModal}\n            onClose={handlePersonModal}\n          />\n        </View>\n      </Screen>\n    );\n  }\n};\n\nexport default MovieDetails;\n"]},"metadata":{},"sourceType":"module"}